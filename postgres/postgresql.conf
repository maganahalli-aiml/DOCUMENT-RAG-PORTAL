# Optimized PostgreSQL configuration for minimal resource usage
# Performance and Memory Settings
shared_buffers = 64MB                    # Reduced from default 128MB
effective_cache_size = 192MB            # Optimized for limited memory
work_mem = 4MB                          # Reduced for concurrent operations
maintenance_work_mem = 16MB             # For maintenance operations
wal_buffers = 16MB                      # Write-ahead logging buffer

# Connection Settings
max_connections = 50                    # Reduced from default 100
superuser_reserved_connections = 3

# Write Ahead Log Settings
wal_level = replica
max_wal_size = 1GB
min_wal_size = 80MB
checkpoint_completion_target = 0.9

# Query Planner Settings
random_page_cost = 1.1                 # Optimized for SSD
effective_io_concurrency = 200
default_statistics_target = 100

# Logging Settings (Minimal for production)
log_destination = 'stderr'
logging_collector = off
log_statement = 'none'
log_min_duration_statement = -1

# Locale and Character Set
lc_messages = 'C'
lc_monetary = 'C'
lc_numeric = 'C'
lc_time = 'C'
default_text_search_config = 'pg_catalog.english'

# Resource Usage
shared_preload_libraries = ''           # No additional extensions
dynamic_shared_memory_type = posix

# Autovacuum Settings (Optimized)
autovacuum = on
autovacuum_max_workers = 2             # Reduced workers
autovacuum_naptime = 60s
autovacuum_vacuum_threshold = 50
autovacuum_analyze_threshold = 50
